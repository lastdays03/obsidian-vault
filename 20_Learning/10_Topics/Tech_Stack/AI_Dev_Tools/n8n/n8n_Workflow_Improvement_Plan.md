> [!IMPORTANT]
> ì´ ë¬¸ì„œì˜ ë‚´ìš©ì€ **[[n8n_YouTube_Auto_Curation_Workflow]]** (v2.0)ì— ë°˜ì˜ë˜ì–´ í†µí•©ë˜ì—ˆìŠµë‹ˆë‹¤. ìµœì‹  ê°€ì´ë“œëŠ” í•´ë‹¹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.

# n8n YouTube ì›Œí¬í”Œë¡œìš° ê°œì„  ì œì•ˆ (v2.0)

ì‚¬ìš©ìê»˜ì„œ ì œê³µí•´ì£¼ì‹  **í˜„ì¬ ì›Œí¬í”Œë¡œìš°(JSON)**ë¥¼ ë¶„ì„í•˜ì—¬, **"í†µí•© íë ˆì´ì…˜ & ì¼ì¼ ë¦¬í¬íŠ¸"** ëª¨ë¸ë¡œ ì „í™˜í•˜ê¸° ìœ„í•œ êµ¬ì²´ì ì¸ ê°€ì´ë“œì…ë‹ˆë‹¤.

## ğŸ“Š ì•„í‚¤í…ì²˜ ë³€ê²½ í•µì‹¬

| êµ¬ë¶„          | í˜„ì¬ ë°©ì‹ (AS-IS)                            | ê°œì„  ë°©ì‹ (TO-BE)                                                                 |
| :------------ | :------------------------------------------- | :-------------------------------------------------------------------------------- |
| **ì²˜ë¦¬ ë‹¨ìœ„** | **ê°œë³„ ë£¨í”„ (Individual Loop)**              | **ë°°ì¹˜ ì²˜ë¦¬ (Batch Processing)**                                                  |
| **íë¦„**      | ê²€ìƒ‰ â†’ ì¤‘ë³µì²´í¬ â†’ (ë£¨í”„) â†’ ìš”ì•½ â†’ í˜ì´ì§€ìƒì„± | ê²€ìƒ‰ â†’ ì¤‘ë³µì²´í¬ â†’ **í†µí•©(Aggregate)** â†’ **AI íë ˆì´ì…˜(Top 10)** â†’ **ë¦¬í¬íŠ¸ ë°œí–‰** |
| **AI ëª¨ë¸**   | Groq (Llama 3.1) - ê±´ê±´ì´ í˜¸ì¶œ               | **Gemini 1.5 Flash** - í•œ ë²ˆì— 50ê°œ ì˜ìƒ ë¶„ì„ (Context Window ìš°ìˆ˜)               |
| **ì¶œë ¥ë¬¼**    | DBì— í˜ì´ì§€ Nê°œ ë‹¨ìˆœ ì¶”ê°€                    | **"2026-01-23 ë¦¬í¬íŠ¸"** í˜ì´ì§€ 1ê°œ + ê³„ì¸µì  ëª©ì°¨                                  |

---

## ğŸ› ï¸ ë‹¨ê³„ë³„ ìˆ˜ì • ê°€ì´ë“œ

### Step 1. ê²€ìƒ‰ëŸ‰ í™•ëŒ€ ë° ì¤‘ë³µ í•„í„° ìµœì í™”

1.  **YouTube Search** ë…¸ë“œ:
    *   `Limit`: **10** â†’ **30~50**ìœ¼ë¡œ ë³€ê²½ (Top 10ì„ ë½‘ìœ¼ë ¤ë©´ í›„ë³´êµ°ì´ ì¶©ë¶„í•´ì•¼ í•¨).
2.  **Notion (Check Existence)** ë…¸ë“œ:
    *   í˜„ì¬: ì „ì²´ ëª©ë¡(`getAll`)ì„ ê°€ì ¸ì™€ì„œ n8n ë©”ëª¨ë¦¬ì—ì„œ ë¹„êµ ì¤‘ (ë¹„íš¨ìœ¨ì ).
    *   ìˆ˜ì •: `Filter` ì˜µì…˜ ì‚¬ìš© â†’ **ìµœê·¼ 7ì¼ ë°ì´í„°ë§Œ** ê°€ì ¸ì˜¤ë„ë¡ ì„¤ì •. (ì†ë„ 10ë°° í–¥ìƒ)
    *   Rule: `ë“±ë¡ì¼` is on or after `{{ $now.minus({days: 7}).toISO() }}`

### Step 2. ë°ì´í„° ë¶„ê¸° (Branching) ë° í†µí•©

ì¤‘ë³µì´ ì•„ë‹Œ **ì‹ ê·œ ì˜ìƒ(False)**ì´ ë‚˜ì˜¤ë©´, ë‘ ê°ˆë˜ë¡œ ë¡œì§ì„ ë‚˜ëˆ•ë‹ˆë‹¤.

1.  **Track A (ë¶„ì„ìš©)**: **`Aggregate`** ë…¸ë“œë¥¼ ì—°ê²°í•˜ì—¬ 50ê°œ ì˜ìƒì„ í•˜ë‚˜ë¡œ í•©ì¹©ë‹ˆë‹¤. (AI ë¶„ì„ìš©)
2.  **Track B (ì•„ì¹´ì´ë¹™ìš©)**: ê¸°ì¡´ì˜ **`Loop Over Items`** ë…¸ë“œë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. (DB ì €ì¥ìš©)

*(ê¸°ì¡´ ê°€ì´ë“œì—ì„œ "ë£¨í”„ ì‚­ì œ"ë¼ê³  í–ˆë˜ ë¶€ë¶„ì€ Two-Track ì „ëµ ë„ì…ìœ¼ë¡œ ì¸í•´ **ì·¨ì†Œ**ë˜ì—ˆìŠµë‹ˆë‹¤. ë£¨í”„ëŠ” ì•„ì¹´ì´ë¹™ì„ ìœ„í•´ í•„ìš”í•©ë‹ˆë‹¤.)*

### Step 3. AI íë ˆì´ì…˜ (Gemini 1.5 Flash)

*   **Node**: `Google Gemini Chat Model` (ë˜ëŠ” HTTP Requestë¡œ Vertex AI í˜¸ì¶œ)
*   **Prompt**:
    > "ì•„ë˜ ì œê³µëœ {{ $json.count }}ê°œì˜ ìœ íŠœë¸Œ ì˜ìƒ ëª©ë¡ì„ ë¶„ì„í•´.
    > ê°œë°œì ê´€ì ì—ì„œ ê°€ì¥ í†µì°°ë ¥ ìˆëŠ” **Top 10** ì˜ìƒì„ ì„ ì •í•˜ê³ ,
    > ì „ì²´ íŠ¸ë Œë“œë¥¼ ìš”ì•½í•´ì„œ **JSON í¬ë§·**ìœ¼ë¡œ ì¶œë ¥í•´."
    >
    > **[ì¶œë ¥ ìŠ¤í‚¤ë§ˆ]**
    > ```json
    > {
    >   "daily_summary": "3ì¤„ ìš”ì•½...",
    >   "trend_keywords": ["Agent", "MCP", ...],
    >   "top_videos": [
    >     { "rank": 1, "title": "...", "reason": "...", "url": "..." }, ...
    >   ]
    > }
    > ```

### Step 4. ë³‘ë ¬ ì²˜ë¦¬ (Two-Track Strategy) ìƒì„¸

ìœ„ì˜ Step 2ì—ì„œ ë‚˜ëˆˆ ë‘ íŠ¸ë™ì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ ì •ë¦¬í•©ë‹ˆë‹¤.

*   **Track A: ë¦¬í¬íŠ¸ ë°œí–‰ (AI ë¶„ì„ìš©)**
    1.  **Aggregate**: ì‹ ê·œ ì˜ìƒë“¤ì„ í•˜ë‚˜ë¡œ ë­‰ì¹©ë‹ˆë‹¤.
    2.  **Gemini 1.5 Flash**: Top 10 ì„ ì • ë° ìš”ì•½ ìˆ˜í–‰.
    3.  **Notion (Daily Report)**: 'ì¼ì¼ ë¦¬í¬íŠ¸ í˜ì´ì§€' ìƒì„±.

*   **Track B: ë°ì´í„° ì•„ì¹´ì´ë¹™ (ì¤‘ë³µ ì²´í¬ìš©)**
    1.  **Loop Over Items**: ì‹ ê·œ ì˜ìƒë“¤ì„ ìˆœíšŒí•©ë‹ˆë‹¤.
    2.  **Notion (Raw DB)**: ê¸°ì¡´ì²˜ëŸ¼ ë°ì´í„°ë² ì´ìŠ¤ì— í˜ì´ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. 'Archive' ìƒíƒœë¡œ ì €ì¥í•˜ì—¬ ì¤‘ë³µ ì²´í¬ìš©ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤.

---

## ğŸš« ì‚­ì œí•´ì•¼ í•  ë…¸ë“œë“¤
*   `Wait` (AI ë¶„ì„ì€ ë°°ì¹˜ë¡œ ì²˜ë¦¬í•˜ë¯€ë¡œ ëŒ€ê¸° ì‹œê°„ì´ í•„ìš” ì—†ìœ¼ë©°, ì•„ì¹´ì´ë¹™ ë£¨í”„ë„ Notion API ì†ë„ê°€ ì¶©ë¶„í•˜ë‹¤ë©´ ì œê±°í•´ë„ ë¬´ë°©í•©ë‹ˆë‹¤.)
*   **ì£¼ì˜**: `Loop Over Items`ì™€ `Create Page`(Save Raw Data)ëŠ” **ì‚­ì œí•˜ì§€ ë§ˆì„¸ìš”!** (Archiving ìš©ë„ë¡œ ì‚¬ìš©)

**[ì§ˆë¬¸ ë‹µë³€] Top 10ê°œë§Œ ì €ì¥í•˜ë©´ ì•ˆ ë ê¹Œìš”?**
**ê²°ë¡ : ì ˆëŒ€ ì•ˆ ë©ë‹ˆë‹¤! (ëª¨ë‘ ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤)**

ë§Œì•½ **Top 10ê°œë§Œ ì €ì¥**í•˜ë©´, **íƒˆë½í•œ 40ê°œì˜ ì˜ìƒ**ì€ DBì— ê¸°ë¡ì´ ë‚¨ì§€ ì•ŠìŠµë‹ˆë‹¤.
ê·¸ëŸ¼ **ë‚´ì¼** ê²€ìƒ‰í•  ë•Œ, ì´ 40ê°œ ì˜ìƒì´ **"ì‹ ê·œ ì˜ìƒ"ìœ¼ë¡œ ë‹¤ì‹œ ê°ì§€**ë˜ì–´ ë˜ AIì—ê²Œ ë„˜ì–´ê°‘ë‹ˆë‹¤.
ê²°êµ­ ì–´ì œ ë³¸ ì˜ìƒì´ ì˜¤ëŠ˜ ë˜ ë¶„ì„ ëŒ€ìƒì´ ë˜ëŠ” **"ë¬´í•œë£¨í”„(Zombie Video)"** í˜„ìƒì´ ë°œìƒí•©ë‹ˆë‹¤.

ë”°ë¼ì„œ **"ë‚´ê°€ ì´ ì˜ìƒì„ ë´¤ë‹¤(ì²˜ë¦¬í–ˆë‹¤)"**ëŠ” ì¦ê±°ë¥¼ ë‚¨ê¸°ê¸° ìœ„í•´, íƒˆë½í•œ ì˜ìƒë„ ëª¨ë‘ DBì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.
ëŒ€ì‹  **Status í”„ë¡œí¼í‹°**ë¡œ êµ¬ë¶„í•˜ë©´ ë©ë‹ˆë‹¤:
*   Top 10 ì„ ì •ì‘ â†’ `Status: Selected` (í™”ë ¤í•˜ê²Œ ê¾¸ë°ˆ)
*   ë‚˜ë¨¸ì§€ íƒˆë½ì‘ â†’ `Status: Archived` (ì¡°ìš©íˆ IDë§Œ ì €ì¥)

## ğŸ› ï¸ ë¶€ë¡ 1: JSON Parserìš© ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ (ë³µì‚¬ìš©)

`Check Duplication` ë’¤ì— ë¶™ì¼ **Code ë…¸ë“œ**ì— ì•„ë˜ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.

```javascript
// n8n Code ë…¸ë“œ - AI ì¶œë ¥ JSON íŒŒì‹± & Notionìš© ë§ˆí¬ë‹¤ìš´ í¬ë§·íŒ…

// 1. ì…ë ¥ì—ì„œ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° (ì—¬ëŸ¬ í•„ë“œ ëŒ€ì‘)
const raw = $input.first().json.text 
         || $input.first().json.output 
         || $input.first().json.content 
         || "";

// 2. ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ì œê±° ë° ì •ë¦¬
const cleaned = raw
  .replace(/```json\s*/g, '')     // ```json ì œê±°
  .replace(/```/g, '')            // ë‚˜ë¨¸ì§€ ``` ì œê±°
  .trim();

// 3. JSON íŒŒì‹± ì‹œë„
let parsed;
try {
  parsed = JSON.parse(cleaned);
} catch (err) {
  return [{
    json: {
      error: true,
      message: "JSON íŒŒì‹± ì‹¤íŒ¨",
      raw_input: raw,
      cleaned_input: cleaned,
      parse_error: err.message
    }
  }];
}

// 4. í•„ìš”í•œ ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸ (ë°©ì–´ì  ì½”ë”©)
if (!parsed || typeof parsed !== 'object') {
  return [{
    json: { error: true, message: "ìœ íš¨í•œ ê°ì²´ê°€ ì•„ë‹˜", raw: raw }
  }];
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// í—¬í¼ í•¨ìˆ˜ë“¤
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const formatTopItem = (item) => 
  `**${item.rank}. ${item.title}**\n` +
  `- ğŸ·ï¸ ${item.keyword || '-'}\n` +
  `- ğŸ“ ${item.summary || 'ìš”ì•½ ì—†ìŒ'}\n` +
  `- ğŸ”— ${item.url || '#' }`;

const formatTopList = (list) => 
  list.map(formatTopItem).join('\n\n');

const formatMentions = (list) => 
  (list || []).map(item => 
    `- ${item.title || 'ì œëª© ì—†ìŒ'}: ${item.url || '#' }`
  ).join('\n');

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ê²°ê³¼ êµ¬ì„±
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const result = {
  daily_summary: parsed.daily_summary || "ìš”ì•½ ì—†ìŒ",
  
  // Notion 2000ì ì œí•œ ê³ ë ¤ â†’ Top 10ì„ 5ê°œì”© ë¶„ë¦¬
  top_list_part1: formatTopList(parsed.top_list?.slice(0, 5)  || []),
  top_list_part2: formatTopList(parsed.top_list?.slice(5, 10) || []),
  
  mentions_markdown: formatMentions(parsed.mentions_list),
  
  // ë””ë²„ê¹…ìš© (í•„ìš” ì‹œ ì£¼ì„ í•´ì œ)
  // parsed_data: parsed,
  // raw_input_for_debug: raw.substring(0, 500) + "..."
};

return [{ json: result }];
```

**[ì§ˆë¬¸ ë‹µë³€] ì˜¤ëŠ˜ ì˜ìƒì´ ë„ˆë¬´ ì ê²Œ(2~3ê°œ) ë‚¨ìœ¼ë©´ ì–´ë–¡í•˜ì£ ?**
ê·¸ê±´ **"ì¢‹ì€ ì‹ í˜¸"**ì…ë‹ˆë‹¤. ì–´ì œê¹Œì§€ì˜ ì¤‘ìš”í•œ ì˜ìƒì€ ë‹¤ ë³´ì…¨ê³ , **"ì˜¤ëŠ˜ ìƒˆë¡œ ì˜¬ë¼ì˜¨ ê²Œ 3ê°œë¿"**ì´ë¼ëŠ” ì •í™•í•œ íŒ©íŠ¸ë¥¼ ì•Œë ¤ì£¼ëŠ” ê²ƒì´ë‹ˆê¹Œìš”.
ì˜¤íˆë ¤ ì–µì§€ë¡œ 10ê°œë¥¼ ì±„ìš°ë ¤ê³  ì–´ì œ ë³¸ ê±¸ ë˜ ê°€ì ¸ì˜¤ë©´ ì •ë³´ì˜ ê°€ì¹˜ê°€ ë–¨ì–´ì§‘ë‹ˆë‹¤.

**ë‹¨, í•˜ë‚˜ ì£¼ì˜í•  ì ! (Buffer Clogging)**
í˜¹ì‹œ *"ìœ íŠœë¸Œì—” ì‹ ê·œ ì˜ìƒì´ ìˆëŠ”ë°, ë‚´ ê²€ìƒ‰ í•œë„(Limit 50)ê°€ ê½‰ ì°¨ì„œ ëª» ê°€ì ¸ì˜¤ëŠ” ê±° ì•„ëƒ?"* ë¼ëŠ” ê±±ì •ì´ ë“œì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ê·¸ë˜ì„œ **YouTube Search ë…¸ë“œì˜ Limitì„ 100ê°œ**ë¡œ ë„‰ë„‰í•˜ê²Œ ëŠ˜ë ¤ì£¼ë©´ ë©ë‹ˆë‹¤. 
(100ê°œë¥¼ ê°€ì ¸ì™€ì„œ 90ê°œê°€ ì¤‘ë³µì´ì–´ë„ ìƒê´€ì—†ìŠµë‹ˆë‹¤. n8nì´ 0.1ì´ˆ ë§Œì— ê±¸ëŸ¬ë‚´ë‹ˆê¹Œìš”. ì¤‘ìš”í•œ ê±´ ê·¸ ë’¤ì— ìˆ¨ì–´ìˆëŠ” 10ê°œì˜ ì‹ ê·œ ì˜ìƒì„ ë†“ì¹˜ì§€ ì•ŠëŠ” ê²ƒì…ë‹ˆë‹¤.)

**[ì§ˆë¬¸ ë‹µë³€] Top 10ì—” ëª» ë“¤ì—ˆì§€ë§Œ ì•„ê¹Œìš´ ì˜ìƒì€ìš”? (FOMO í•´ê²°)**
ë§ìŠµë‹ˆë‹¤. 11ìœ„ ì˜ìƒì´ ë‚´ê²Œ ê¼­ í•„ìš”í•œ ì •ë³´ì¼ ìˆ˜ë„ ìˆì£ . **"ì™„ì „ ì œì™¸"**ë˜ë©´ ë¶ˆì•ˆí•©ë‹ˆë‹¤.
ê·¸ë˜ì„œ **"Honorable Mentions (ì•„ì°¨ìƒ)"** ì„¹ì…˜ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

*   **Main**: Top 1 ~ 10 (ìƒì„¸ ìš”ì•½ í¬í•¨)
*   **Sub**: **Next 11 ~ 20** (ì œëª© + ë§í¬ë§Œ ìˆëŠ” í•œ ì¤„ ë¦¬ìŠ¤íŠ¸)

ì´ë ‡ê²Œ í•˜ë©´ **ìƒìœ„ 20ê°œ**ê¹Œì§€ ì»¤ë²„ë˜ë¯€ë¡œ, ì •ë§ ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë†“ì¹  í™•ë¥ ì€ ê±°ì˜ 0%ì— ìˆ˜ë ´í•©ë‹ˆë‹¤.

**[ì§ˆë¬¸ ë‹µë³€] AIê°€ ì˜ìƒ ë‚´ìš©ì„ ì§„ì§œ ë‹¤ ë³´ê³  ë¶„ì„í•˜ë‚˜ìš”?**
í˜„ì¬ ì„¤ì •ì€ **"ë©”íƒ€ë°ì´í„°(ì œëª© + ì„¤ëª…ê¸€)"**ë§Œ ë³´ê³  ë¶„ì„í•©ë‹ˆë‹¤.
*   **ì´ìœ **: 50~100ê°œì˜ ì˜ìƒì„ ì „ë¶€ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ì¶œí•˜ë©´ ì†ë„ê°€ ë§¤ìš° ëŠë¦¬ê³  API ë¹„ìš©ì´ í­ì¦í•©ë‹ˆë‹¤.
*   **íš¨ê³¼**: ì œëª©ê³¼ ì„¤ëª…ê¸€ë§Œ ì˜ íŒŒì•…í•´ë„ "íŠ¸ë Œë“œ íŒŒì•…"ì´ë‚˜ "ê´€ì‹¬ì‚¬ ë§¤ì¹­"ì€ 90% ì´ìƒ ì •í™•í•©ë‹ˆë‹¤.
*   *íŒ: ë§Œì•½ íŠ¹ì • ì˜ìƒì˜ **"ì‹¬ì¸µ ë‚´ìš©"**ê¹Œì§€ ìš”ì•½í•˜ê³  ì‹¶ë‹¤ë©´, Top 10ìœ¼ë¡œ ì„ ì •ëœ ì• ë“¤ë§Œ ë”°ë¡œ **YouTube Transcript(ìë§‰)** ë…¸ë“œë¥¼ ëŒë ¤ì„œ 2ì°¨ ë¶„ì„ì„ í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì…ë‹ˆë‹¤.*

**[ì§ˆë¬¸ ë‹µë³€] AIê°€ ì˜ìƒ ë‚´ìš©ì„ ì§„ì§œ ë‹¤ ë³´ê³  ë¶„ì„í•˜ë‚˜ìš”?**
í˜„ì¬ ì„¤ì •ì€ **"ë©”íƒ€ë°ì´í„°(ì œëª© + ì„¤ëª…ê¸€)"**ë§Œ ë³´ê³  ë¶„ì„í•©ë‹ˆë‹¤.
*   **ì´ìœ **: 50~100ê°œì˜ ì˜ìƒì„ ì „ë¶€ ë‹¤ìš´ë¡œë“œí•˜ê±°ë‚˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì¶”ì¶œí•˜ë©´ ì†ë„ê°€ ë§¤ìš° ëŠë¦¬ê³  API ë¹„ìš©ì´ í­ì¦í•©ë‹ˆë‹¤.
*   **íš¨ê³¼**: ì œëª©ê³¼ ì„¤ëª…ê¸€ë§Œ ì˜ íŒŒì•…í•´ë„ "íŠ¸ë Œë“œ íŒŒì•…"ì´ë‚˜ "ê´€ì‹¬ì‚¬ ë§¤ì¹­"ì€ 90% ì´ìƒ ì •í™•í•©ë‹ˆë‹¤.
*   *íŒ: ë§Œì•½ íŠ¹ì • ì˜ìƒì˜ **"ì‹¬ì¸µ ë‚´ìš©"**ê¹Œì§€ ìš”ì•½í•˜ê³  ì‹¶ë‹¤ë©´, Top 10ìœ¼ë¡œ ì„ ì •ëœ ì• ë“¤ë§Œ ë”°ë¡œ **YouTube Transcript(ìë§‰)** ë…¸ë“œë¥¼ ëŒë ¤ì„œ 2ì°¨ ë¶„ì„ì„ í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì…ë‹ˆë‹¤.*

**[ì§ˆë¬¸ ë‹µë³€] Notion ì—ëŸ¬(Bad Request)ê°€ ì™œ ë‚˜ë‚˜ìš”?**
AIê°€ ë±‰ì€ ê²°ê³¼ê°€ **"ì§„ì§œ JSON ê°ì²´"**ê°€ ì•„ë‹ˆë¼ **"JSON ëª¨ì–‘ì„ í•œ ë¬¸ìì—´(String)"**ì´ë¼ì„œ ê·¸ë ‡ìŠµë‹ˆë‹¤.
(íŠ¹íˆ ` ```json ... ``` ` ê°™ì€ ë§ˆí¬ë‹¤ìš´ ê¸°í˜¸ê°€ ë¶™ì–´ìˆìœ¼ë©´ ì—ëŸ¬ê°€ ë‚©ë‹ˆë‹¤.)

ì‚¬ìš©ìë¶„ê»˜ì„œ ë§ì”€í•˜ì‹  ëŒ€ë¡œ **"ì „ì²˜ë¦¬(Pre-processing)"**ê°€ ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤.
Output Parserë¥¼ ì“°ëŠ” ë°©ë²•ë„ ìˆì§€ë§Œ, ì„¤ì •ì´ ê¹Œë‹¤ë¡­ê³  ì—ëŸ¬ê°€ ì¦ìŠµë‹ˆë‹¤.
**ê°€ì¥ í™•ì‹¤í•œ ë°©ë²•**ì€ AI ë°”ë¡œ ë’¤ì— **`Code` ë…¸ë“œ(ì²­ì†Œë¶€)**ë¥¼ ë¶™ì—¬ì„œ ê°•ì œë¡œ ë²—ê²¨ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤.

## ğŸ¤– ì¶”ì²œ ë¬´ë£Œ AI ëª¨ë¸: Groq (Llama 3.3 70B)
ì‚¬ìš©ìë¶„ê»˜ì„œ ì œê³µí•´ì£¼ì‹  `Free_LLM_API_Limits_2026.md` ë¬¸ì„œë¥¼ ë¶„ì„í•œ ê²°ê³¼, **Geminiì˜ ëŒ€ì•ˆ**ìœ¼ë¡œ **Groq**ë¥¼ ê°•ë ¥ ì¶”ì²œí•©ë‹ˆë‹¤.

| ë¹„êµ í•­ëª© | Google Gemini 1.5 Flash â­ï¸                                                | Groq (Llama 3.3 70B) ğŸš€                                                                 |
| :-------- | :----------------------------------------------------------------------- | :------------------------------------------------------------------------------------- |
| **ì¥ì **  | Context Windowê°€ í¼ (1M Token) <br> ì…ë ¥ ë°ì´í„°ê°€ ë§ì•„ë„ ê±°ëœ¬í•¨.         | **ì†ë„ê°€ ì••ë„ì ìœ¼ë¡œ ë¹ ë¦„** (ë¦¬ì–¼íƒ€ì„ ìˆ˜ì¤€) <br> Llama 3.3 70Bì˜ ì§€ëŠ¥ì´ ë§¤ìš° ë›°ì–´ë‚¨.    |
| **ë‹¨ì **  | ìµœê·¼ **ë¬´ë£Œ ì¿¼í„°(RPD)ê°€ 50íšŒ**ë¡œ ì¤„ì–´ë“¦. <br> í…ŒìŠ¤íŠ¸í•˜ë‹¤ ë³´ë©´ ê¸ˆë°© ë§‰í˜. | **TPM(ë¶„ë‹¹ í† í°) ì œí•œ**ì´ 6k~12kë¡œ ë‚®ìŒ. <br> í•œ ë²ˆì— ë„ˆë¬´ ë§ì€ ê¸€ìë¥¼ ë„£ìœ¼ë©´ ì—ëŸ¬ ë‚¨. |
| **ê²°ë¡ **  | **í•˜ë£¨ 1ë²ˆ ë¦¬í¬íŠ¸ìš©**ìœ¼ë¡œëŠ” ì—¬ì „íˆ ìµœê³ .                                 | **ë°˜ë³µ í…ŒìŠ¤íŠ¸** ë° **ë¹ ë¥¸ ì‹¤í–‰**ìš©ìœ¼ë¡œ ìµœê³ .                                           |

**[Groq ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­]**
GroqëŠ” **TPM(ë¶„ë‹¹ í† í° ì œí•œ)**ì´ ë¹¡ë¹¡í•©ë‹ˆë‹¤. ë”°ë¼ì„œ JSONì„ ë˜ì§ˆ ë•Œ **"ì˜ìƒ ì„¤ëª…(Description)"ì„ ì œì™¸**í•˜ê³  **"ì œëª© + ì±„ë„ëª…"**ë§Œ ë˜ì ¸ì•¼ ì—ëŸ¬ê°€ ì•ˆ ë‚©ë‹ˆë‹¤. (ì œëª©ë§Œ ë´ë„ ì¶©ë¶„í•©ë‹ˆë‹¤)

## âš¡ï¸ ì„±ëŠ¥ ìµœì í™” ì›ë¦¬ (ì™œ ë¹¨ë¼ì§€ë‚˜ìš”?)

ì‚¬ìš©ìë¶„ê»˜ì„œ ë§ì”€í•˜ì‹  **"ë™ì˜ìƒ ê°œìˆ˜ê°€ ë§ì•„ì§€ë©´ ëŠë ¤ì§€ëŠ” ë¬¸ì œ"**ëŠ” ê¸°ì¡´ ë°©ì‹ì˜ êµ¬ì¡°ì  í•œê³„ ë•Œë¬¸ì…ë‹ˆë‹¤. v2.0ì—ì„œëŠ” ì´ë¥¼ ì™„ë²½í•˜ê²Œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

| êµ¬ë¶„          | ê¸°ì¡´ ë°©ì‹ (ë¬¸ì œì ) ğŸ¢                                                  | ê°œì„ ëœ v2.0 ë°©ì‹ ğŸš€                                  |
| :------------ | :-------------------------------------------------------------------- | :-------------------------------------------------- |
| **ë™ì‘ ì›ë¦¬** | ê²€ìƒ‰ëœ ì˜ìƒì´ 50ê°œë©´, **Notion ì¡°íšŒë„ 50ë²ˆ** ì‹¤í–‰í•¨. (ê±´ê±´ì´ ID ë¹„êµ) | Notionì—ì„œ **ìµœê·¼ 7ì¼ì¹˜ ë°ì´í„°ë¥¼ ë”± 1ë²ˆ**ë§Œ ê°€ì ¸ì˜´. |
| **API í˜¸ì¶œ**  | **N + 1 ë¬¸ì œ** (ë°ì´í„°ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ ëŠë ¤ì§)            | **ë‹¨ 1íšŒ í˜¸ì¶œ** (ë°ì´í„°ê°€ 1000ê°œì—¬ë„ 1ë²ˆ í˜¸ì¶œë¡œ ë) |
| **ë¹„êµ ì¥ì†Œ** | Notion ì„œë²„ (ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë°œìƒ)                                      | **n8n ë©”ëª¨ë¦¬** (ì»´í“¨í„° ì—°ì‚°ìœ¼ë¡œ 0.01ì´ˆ ë§Œì— ë¹„êµ)   |

> **í•µì‹¬**: "ì´ ì˜ìƒ ìˆë‹ˆ?" í•˜ê³  50ë²ˆ ë¬¼ì–´ë³´ëŠ” ëŒ€ì‹ , "ìµœê·¼ 1ì£¼ì¼ì¹˜ ì¥ë¶€ ì¤˜ë´" í•˜ê³  ë°›ì•„ì„œ n8nì´ ì§ì ‘ ëŒ€ì¡°í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë°ì´í„°ê°€ 1ë§Œ ê°œê°€ ë„˜ì–´ê°€ë„ ì´ ë°©ì‹ì€ ëŠë ¤ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.

## ğŸ’¡ ë‹¤ìŒ ì•¡ì…˜
**[ì§ˆë¬¸ ë‹µë³€] Notion íŠ¸ë¦¬ êµ¬ì¡°ëŠ” ì–´ë–»ê²Œ í• ê¹Œìš”? (ë…„/ì›”/ì¼ vs ë…„ ì›”/ì¼)**
ê²°ë¡ ë¶€í„° ë§ì”€ë“œë¦¬ë©´, **"ë¬¼ë¦¬ì ì¸ í´ë”(í˜ì´ì§€)ë¥¼ ë§Œë“¤ì§€ ë§ˆì„¸ìš”."** ğŸ™…â€â™‚ï¸
n8n ìë™í™”ì—ì„œ 'ìƒìœ„ í˜ì´ì§€(ë…„/ì›”)'ë¥¼ ì°¾ì•„ì„œ IDë¥¼ ê°€ì ¸ì˜¤ëŠ” ê±´ ë§¤ìš° ë³µì¡í•˜ê³  ë¶ˆì•ˆì •í•©ë‹ˆë‹¤.

**âœ… ì¶”ì²œ ë°©ì‹: "ë‹¨ì¼ ë°ì´í„°ë² ì´ìŠ¤ + Grouping View"**
ëª¨ë“  ë¦¬í¬íŠ¸ë¥¼ **í•˜ë‚˜ì˜ DB**ì— ë•Œë ¤ ë„£ìœ¼ì„¸ìš”. ê·¸ë¦¬ê³  Notionì˜ ê°•ë ¥í•œ **"ë³´ê¸°(View)"** ê¸°ëŠ¥ì„ ì“°ë©´ ë©ë‹ˆë‹¤.

1.  **ë°ì´í„°ë² ì´ìŠ¤**: `YouTube AI Reports` (í•˜ë‚˜ë§Œ ìƒì„±)
2.  **ì†ì„±(Property)**: `Date` (ë‚ ì§œ), `Tags` (íƒœê·¸)
3.  **ë³´ê¸° ì„¤ì •(View)**:
    *   **"ìº˜ë¦°ë” ë³´ê¸°"**: ë‹¬ë ¥ í˜•íƒœë¡œ ì§ê´€ì ìœ¼ë¡œ í™•ì¸
    *   **"ë¦¬ìŠ¤íŠ¸ ë³´ê¸° (ì›”ë³„ ê·¸ë£¹í™”)"**: `Group by Date (Month)` ì„¤ì •ì„ ì¼œë©´, ìë™ìœ¼ë¡œ **[2026ë…„ 1ì›”]**, **[2026ë…„ 2ì›”]** ì ‘ì´ì‹ í† ê¸€ì´ ìƒê¹ë‹ˆë‹¤.

> **Why?**: ì´ë ‡ê²Œ í•´ì•¼ ë‚˜ì¤‘ì— "ì‘ë…„ 1ì›” ë°ì´í„°ë§Œ ê²€ìƒ‰í•´ì¤˜" ê°™ì€ AI ì§ˆë¬¸ë„ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤. í´ë”ë¡œ ìª¼ê°œë©´ AIê°€ ëª» ì°¾ìŠµë‹ˆë‹¤.

**[ì§ˆë¬¸ ë‹µë³€] í˜ì´ì§€ ìƒì„±ê³¼ ë‚´ìš© ì‘ì„±ì„ í•˜ë‚˜ë¡œ í•©ì¹ (Merge) ìˆœ ì—†ë‚˜ìš”?**
ê¸°ìˆ ì ìœ¼ë¡œëŠ” ê°€ëŠ¥í•˜ì§€ë§Œ, **n8nì—ì„œëŠ” ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ê°•ë ¥ ì¶”ì²œ**í•©ë‹ˆë‹¤.
1.  **UI í•œê³„**: n8nì˜ `Create Page` ë…¸ë“œëŠ” ì£¼ë¡œ "ì†ì„±(ì œëª©, ë‚ ì§œ)" ì„¤ì •ì— ì§‘ì¤‘ë˜ì–´ ìˆì–´, ë³¸ë¬¸(Block)ì„ ë„£ëŠ” ì˜µì…˜ì´ ìˆ¨ê²¨ì ¸ ìˆê±°ë‚˜ ë‹¤ë£¨ê¸° ì–´ë µìŠµë‹ˆë‹¤.
2.  **ë°ì´í„° ì¦ë°œ ë°©ì§€**: `Create` ë…¸ë“œë¥¼ ì§€ë‚˜ë©´ ì´ì „ ë°ì´í„°($json)ê°€ "ìƒì„±ëœ í˜ì´ì§€ ì •ë³´"ë¡œ ë®ì–´ì”Œì›Œì§‘ë‹ˆë‹¤. ê·¸ë˜ì„œ ë‘ ë²ˆì§¸ ë…¸ë“œì—ì„œ `$('JSON Parser').item.json...` ì²˜ëŸ¼ ì´ì „ ë°ì´í„°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë¶ˆëŸ¬ì™€ì•¼ ì•ˆì „í•©ë‹ˆë‹¤.
3.  **ìœ ì§€ë³´ìˆ˜**: "ì†ì„± ë³€ê²½"ê³¼ "ë³¸ë¬¸ ìˆ˜ì •"ì„ ë¶„ë¦¬í•´ì•¼ ë‚˜ì¤‘ì— ê¼¬ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

**[ì§ˆë¬¸ ë‹µë³€] ê·¸ëƒ¥ ì¼ë°˜ í˜ì´ì§€(Page)ë¡œ ë§Œë“¤ë©´ ì•ˆ ë˜ë‚˜ìš”? ê¼­ DBì—¬ì•¼ í•˜ë‚˜ìš”?**
ë„¤, **ë°˜ë“œì‹œ "ë°ì´í„°ë² ì´ìŠ¤ í˜ì´ì§€(Database Page)"ì—¬ì•¼ í•©ë‹ˆë‹¤.** ğŸš¨
*   **ì¼ë°˜ í˜ì´ì§€**: ê·¸ëƒ¥ ë©”ëª¨ì¥ì…ë‹ˆë‹¤. "ë‚ ì§œ(Date)" ê°™ì€ ì†ì„±ì„ ê°€ì§ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‚˜ì¤‘ì— "1ì›” ë¦¬í¬íŠ¸ë§Œ ëª¨ì•„ë´" ê°™ì€ ê²Œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
*   **DB í˜ì´ì§€**: ì—‘ì…€ì˜ í•œ í–‰(Row)ê³¼ ê°™ìŠµë‹ˆë‹¤. **ë‚ ì§œ, íƒœê·¸, ìƒíƒœ(Status)** ë“± ë©”íƒ€ë°ì´í„°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì–´ì„œ, ì•„ê¹Œ ë§ì”€ë“œë¦° **"ìº˜ë¦°ë” ë³´ê¸°", "ì›”ë³„ ë³´ê¸°"**ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

*   **DB í˜ì´ì§€**: ì—‘ì…€ì˜ í•œ í–‰(Row)ê³¼ ê°™ìŠµë‹ˆë‹¤. **ë‚ ì§œ, íƒœê·¸, ìƒíƒœ(Status)** ë“± ë©”íƒ€ë°ì´í„°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì–´ì„œ, ì•„ê¹Œ ë§ì”€ë“œë¦° **"ìº˜ë¦°ë” ë³´ê¸°", "ì›”ë³„ ë³´ê¸°"**ê°€ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.

## ğŸ¨ Notion ë³´ê¸° ì„¤ì • ê°€ì´ë“œ (ì™¼ìª½ íŠ¸ë¦¬ê°€ ì•„ë‹ˆë¼ 'ë³¸ë¬¸ íŠ¸ë¦¬' ë§Œë“¤ê¸°)

ì‚¬ìš©ìë¶„ê»˜ì„œ ë§ì”€í•˜ì‹  **"ì™¼ìª½ ì‚¬ì´ë“œë°” íŠ¸ë¦¬"**ëŠ” ì•„ì‰½ê²Œë„ ë°ì´í„°ë² ì´ìŠ¤ í˜ì´ì§€ì—ì„œëŠ” ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
ëŒ€ì‹ , **ë°ì´í„°ë² ì´ìŠ¤ ë³¸ë¬¸ì—ì„œ "ì ‘ì´ì‹ íŠ¸ë¦¬(Toggle)"**ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì„ ì•Œë ¤ë“œë¦´ê²Œìš”. (ì´ê²Œ í›¨ì”¬ ë³´ê¸° ì¢‹ìŠµë‹ˆë‹¤!)

1.  Notion ë°ì´í„°ë² ì´ìŠ¤ ìƒë‹¨ì˜ **`+` (ë³´ê¸° ì¶”ê°€)** í´ë¦­
2.  **`ëª©ë¡(List)`** ë³´ê¸° ì„ íƒ
3.  ìƒì„±ëœ ë³´ê¸°ì˜ ì˜µì…˜(ì  3ê°œ) í´ë¦­ â†’ **`ê·¸ë£¹(Group)`** í´ë¦­
4.  **`ê·¸ë£¹í™” ê¸°ì¤€: ë‚ ì§œ(Date)`** ì„ íƒ
5.  **`ë‚ ì§œ ê¸°ì¤€: ì›”(Month)`** ì„ íƒ (ë˜ëŠ” ë…„ë„ë³„ë¡œ ë³´ê³  ì‹¶ìœ¼ë©´ Year)

ğŸ‘‰ **ê²°ê³¼**:
*   `> 2026ë…„ 1ì›”` (í´ë¦­í•˜ë©´ í´ì§)
*   `> 2026ë…„ 2ì›”` (í´ë¦­í•˜ë©´ í´ì§)
ì´ë ‡ê²Œ **"ì›”ë³„ë¡œ ê¹”ë”í•˜ê²Œ ì •ë¦¬ëœ íŠ¸ë¦¬"**ê°€ ë³¸ë¬¸ì— ìƒê¹ë‹ˆë‹¤. ì„±ê³µ ì¶•í•˜ë“œë¦½ë‹ˆë‹¤! ğŸ‰

## ğŸ ë¶€ë¡: ê°œì„ ëœ ì›Œí¬í”Œë¡œìš° JSON (v3.2 Final - Create Page)
ì•„ë˜ ì½”ë“œëŠ” **"ìƒˆ í˜ì´ì§€ ìë™ ìƒì„±"** ê¸°ëŠ¥ì´ ì¶”ê°€ëœ ìµœì¢…ë³¸ì…ë‹ˆë‹¤. (ë³µì‚¬í•´ì„œ ê¸°ì¡´ ì›Œí¬í”Œë¡œìš°ë¥¼ ë®ì–´ì”Œìš°ì„¸ìš”!)

```json
{
  "name": "YouTube Auto-Curation & Daily Report (v2.0)",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "triggerAtHour": 9
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.1,
      "position": [0, 0]
    },
    {
      "parameters": {
        "jsCode": "return [\n  { json: { keyword: 'n8n' } },\n  { json: { keyword: 'LangChain' } },\n  { json: { keyword: 'MCP' } }\n];"
      },
      "id": "define-keywords",
      "name": "Keywords",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [220, 0]
    },
    {
      "parameters": {
        "resource": "video",
        "limit": 100,
        "filters": {
          "publishedAfter": "={{ $now.minus({ days: 7 }).toISO() }}",
          "q": "={{ $json.keyword }}"
        },
        "options": {}
      },
      "id": "youtube-search",
      "name": "YouTube Search",
      "type": "n8n-nodes-base.youTube",
      "typeVersion": 1,
      "position": [440, 0],
      "credentials": {
        "youTubeOAuth2Api": {
          "id": "YOUR_YOUTUBE_CREDENTIAL_ID",
          "name": "YouTube account"
        }
      }
    },
    {
      "parameters": {
        "resource": "databasePage",
        "operation": "getAll",
        "databaseId": {
          "__rl": true,
          "value": "YOUR_NOTION_DATABASE_ID",
          "mode": "list"
        },
        "filterType": "json",
        "filterJson": "={\n  \"and\": [\n    {\n      \"property\": \"ë“±ë¡ì¼\",\n      \"date\": {\n        \"on_or_after\": \"{{ $now.minus({ days: 7 }).toISO() }}\"\n      }\n    }\n  ]\n}"
      },
      "id": "check-duplication",
      "name": "Check Duplication (7 Days)",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [660, 200],
      "executeOnce": true,
      "credentials": {
        "notionApi": {
          "id": "YOUR_NOTION_CREDENTIAL_ID",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "keepOnlySet": true,
        "values": {
          "string": [
            {
              "name": "notion_id",
              "value": "={{ $json.id }}"
            },
            {
              "name": "match_video_id",
              "value": "={{ $json.properties.videoId.rich_text[0].text.content }}"
            }
          ]
        },
        "options": {}
      },
      "id": "clean-notion-data",
      "name": "Clean Notion Data",
      "type": "n8n-nodes-base.set",
      "typeVersion": 2,
      "position": [760, 200]
    },
    {
      "parameters": {
        "mode": "combine",
        "mergeByFields": {
          "values": [
            {
              "field1": "id.videoId",
              "field2": "match_video_id"
            }
          ]
        },
        "joinMode": "enrichInput1",
        "options": {}
      },
      "id": "merge-data",
      "name": "Merge",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 3,
      "position": [880, 0]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.notion_id }}",
              "operation": "isEmpty"
            }
          ]
        }
      },
      "id": "filter-new",
      "name": "Filter New Videos",
      "type": "n8n-nodes-base.if",
      "typeVersion": 1,
      "position": [1100, 0]
    },
    {
      "parameters": {
        "aggregate": "aggregateAllItemData",
        "destinationFieldName": "allVideos"
      },
      "id": "aggregate-videos",
      "name": "Aggregate (For AI)",
      "type": "n8n-nodes-base.aggregate",
      "typeVersion": 1,
      "position": [1380, -100]
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=ë‹¹ì‹ ì€ Tech ìœ íŠœë¸Œ íë ˆì´í„°ì…ë‹ˆë‹¤.\nì œê³µëœ {{ $json.allVideos.length }}ê°œì˜ ì˜ìƒ ëª©ë¡(allVideos)ì„ ë¶„ì„í•´ì„œ ì¼ì¼ ë¦¬í¬íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”.\n\n[í•„ìˆ˜ ìš”ì²­ì‚¬í•­]\n1. ì „ì²´ ëª©ë¡ ì¤‘ ê°€ì¥ ê°€ì¹˜ ìˆëŠ” **Top 10** ì˜ìƒì„ ì„ ì •í•˜ì—¬ 'top_list'ì— ë‹´ìœ¼ì„¸ìš”. (ìƒì„¸ ìš”ì•½ í•„ìˆ˜)\n2. Top 10ì—ëŠ” ëª» ë“¤ì—ˆì§€ë§Œ ì¢‹ì€ **Next 10** ì˜ìƒì„ ì„ ì •í•˜ì—¬ 'mentions_list'ì— ë‹´ìœ¼ì„¸ìš”. (ìš”ì•½ ì—†ì´ ì œëª©ë§Œ)\n3. ê²°ê³¼ëŠ” ì˜¤ì§ **JSON** í˜•ì‹ìœ¼ë¡œë§Œ ì¶œë ¥í•˜ì„¸ìš”.\n\n[JSON ìŠ¤í‚¤ë§ˆ]\n{\n  \"daily_summary\": \"ì˜¤ëŠ˜ì˜ ê¸°ìˆ  íŠ¸ë Œë“œ 3ì¤„ ìš”ì•½\",\n  \"top_list\": [\n    {\n      \"rank\": 1,\n      \"keyword\": \"n8n\",\n      \"title\": \"ì˜ìƒ ì œëª©\",\n      \"summary\": \"í•µì‹¬ ìš”ì•½\",\n      \"url\": \"https://youtu.be/...\"\n    }, ...\n  ],\n  \"mentions_list\": [\n    {\n      \"title\": \"ì˜ìƒ ì œëª©\",\n      \"url\": \"https://youtu.be/...\"\n    }, ...\n  ]\n}\n\n[ë°ì´í„°]\n{{ JSON.stringify($json.allVideos) }}"
      },
      "id": "ai-curation",
      "name": "Gemini 1.5 Flash (Curation)",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1,
      "position": [1600, -100],
      "credentials": {
        "googleVertexAiApi": {
          "id": "YOUR_GEMINI_CREDENTIAL_ID",
          "name": "Google Gemini"
        }
      }
    },
      "parameters": {
        "jsCode": "const raw = $input.first().json.text || $input.first().json.output || \"\";\n\n// 1. ë§ˆí¬ë‹¤ìš´ ì œê±°\nconst clean = raw.replace(/```json/g, '').replace(/```/g, '').trim();\n\ntry {\n  const data = JSON.parse(clean);\n  \n  // 2. ë°ì´í„° ê°€ê³µ (Formatting)\n  // Top 10 ë¦¬ìŠ¤íŠ¸ -> ë§ˆí¬ë‹¤ìš´ ë³€í™˜\n  const formatTopList = (list) => list.map(v => `**${v.rank}. ${v.title}**\\n- ğŸ·ï¸ ${v.keyword}\\n- ğŸ“ ${v.summary}\\n- ğŸ”— ${v.url}`).join('\\n\\n');\n  \n  // Honorable Mentions -> ë§ˆí¬ë‹¤ìš´ ë³€í™˜\n  const formatMentions = (list) => list.map(v => `- ${v.title}: ${v.url}`).join('\\n');\n\n  // 3. ê²°ê³¼ ë°˜í™˜ (ë¯¸ë¦¬ ìª¼ê°œì„œ ë³´ëƒ„)\n  return {\n    daily_summary: data.daily_summary,\n    // Top 10ì„ 5ê°œì”© ìª¼ê°¬ (Notion 2000ì ì œí•œ ë°©ì§€)\n    top_list_part1: formatTopList(data.top_list.slice(0, 5)),\n    top_list_part2: formatTopList(data.top_list.slice(5, 10)),\n    mentions_markdown: formatMentions(data.mentions_list)\n  };\n  \n} catch (e) {\n  return { error: 'JSON Parsing Failed', message: e.message, raw: raw };\n}"
      },
      "id": "parse-ai-response",
      "name": "JSON Parser (Cleaner)",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1750, -100]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "YOUR_DATABASE_ID",
          "mode": "id"
        },
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "Name",
              "title": "={{ $now.toFormat('yyyy-MM-dd') }} Daily AI Report ğŸ“°"
            },
            {
              "key": "Date",
              "date": "={{ $now.toISO() }}"
            }
          ]
        }
      },
      "id": "create-daily-page",
      "name": "Create Daily Page",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [1900, -100],
      "credentials": {
        "notionApi": {
          "id": "YOUR_NOTION_CREDENTIAL_ID",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {
        "resource": "block",
        "operation": "append",
        "blockId": {
          "__rl": true,
          "value": "={{ $json.id }}",
          "mode": "id"
        },
        "blocksUi": {
          "blocks": [
            {
              "type": "heading_1",
              "textContent": "ğŸ“Š ì˜¤ëŠ˜ì˜ ê¸°ìˆ  íŠ¸ë Œë“œ ìš”ì•½"
            },
            {
              "type": "paragraph",
              "textContent": "={{ $('JSON Parser (Cleaner)').item.json.daily_summary }}"
            },
            {
              "type": "heading_2",
              "textContent": "ğŸ† Top 10 ì„ ì • ì˜ìƒ"
            },
            {
              "type": "paragraph",
              "textContent": "={{ $('JSON Parser (Cleaner)').item.json.top_list_part1 }}"
            },
            {
              "type": "paragraph",
              "textContent": "={{ $('JSON Parser (Cleaner)').item.json.top_list_part2 }}"
            },
            {
              "type": "heading_3",
              "textContent": "ğŸ‘€ ê·¸ ì™¸ ì£¼ëª©í•  ë§Œí•œ ì˜ìƒ (Honorable Mentions)"
            },
            {
              "type": "paragraph",
              "textContent": "={{ $('JSON Parser (Cleaner)').item.json.mentions_markdown }}"
            }
          ]
        }
      },
      "id": "write-report",
      "name": "Writes to Page",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [2100, -100],
      "credentials": {
        "notionApi": {
          "id": "YOUR_NOTION_CREDENTIAL_ID",
          "name": "Notion account"
        }
      }
    },
    {
      "parameters": {},
      "id": "loop-archiving",
      "name": "Loop (Archiving)",
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [1380, 200]
    },
    {
      "parameters": {
        "resource": "databasePage",
        "databaseId": {
          "__rl": true,
          "value": "YOUR_NOTION_DATABASE_ID",
          "mode": "list"
        },
        "title": "={{ $json.snippet.title }}",
        "propertiesUi": {
          "propertyValues": [
            {
              "key": "URL|url",
              "urlValue": "=https://www.youtube.com/watch?v={{ $json.id.videoId }}"
            },
            {
              "key": "ì±„ë„|rich_text",
              "textContent": "={{ $json.snippet.channelTitle }}"
            },
            {
              "key": "ë“±ë¡ì¼|date",
              "date": "={{ $json.snippet.publishedAt }}"
            },
             {
              "key": "videoId|rich_text",
              "textContent": "={{ $json.id.videoId }}"
            },
            {
              "key": "ìˆ˜ì§‘ë°©ì‹|select",
              "selectValue": "n8n_Auto_Archived"
            }
          ]
        }
      },
      "id": "save-raw-data",
      "name": "Save Raw Data",
      "type": "n8n-nodes-base.notion",
      "typeVersion": 2,
      "position": [1600, 200],
      "credentials": {
        "notionApi": {
          "id": "YOUR_NOTION_CREDENTIAL_ID",
          "name": "Notion account"
        }
      }
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [[{ "node": "Keywords", "type": "main", "index": 0 }]]
    },
    "Keywords": {
      "main": [[{ "node": "YouTube Search", "type": "main", "index": 0 }]]
    },
    "YouTube Search": {
      "main": [
        [
          { "node": "Check Duplication", "type": "main", "index": 0 },
          { "node": "Merge", "type": "main", "index": 0 }
        ]
      ]
    },
    "Check Duplication": {
      "main": [[{ "node": "Merge", "type": "main", "index": 1 }]]
    },
    "Merge": {
      "main": [[{ "node": "Filter New Videos", "type": "main", "index": 0 }]]
    },
    "Filter New Videos": {
      "main": [
        [
          { "node": "Aggregate (For AI)", "type": "main", "index": 0 },
          { "node": "Loop (Archiving)", "type": "main", "index": 0 }
        ]
      ]
    },
    "Aggregate (For AI)": {
      "main": [[{ "node": "Gemini 1.5 Flash (Curation)", "type": "main", "index": 0 }]]
    },
    "Gemini 1.5 Flash (Curation)": {
      "main": [[{ "node": "JSON Parser (Cleaner)", "type": "main", "index": 0 }]]
    },
    "JSON Parser (Cleaner)": {
      "main": [[{ "node": "Create Daily Page", "type": "main", "index": 0 }]]
    },
    "Create Daily Page": {
      "main": [[{ "node": "Writes to Page", "type": "main", "index": 0 }]]
    },
    "Writes to Page": {
      "main": [[]]
    },
    "Loop (Archiving)": {
      "main": [
        [],
        [{ "node": "Save Raw Data", "type": "main", "index": 0 }]
      ]
    },
    "Save Raw Data": {
      "main": [[{ "node": "Loop (Archiving)", "type": "main", "index": 0 }]]
    }
  }
}
```
