---
tags:
  - knowledge/topic
Source: [[GitHub_Study_Python]]
---

# íŒŒì´ì¬ ë°ì½”ë ˆì´í„°(Decorator) ì™„ì „ ê°€ì´ë“œ

## ğŸ“– ì •ì˜ (Definition)
**ë°ì½”ë ˆì´í„°(Decorator)**ëŠ” ê¸°ì¡´ í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ì˜ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ìƒˆë¡œìš´ ê¸°ëŠ¥(ë¡œê¹…, ì¸ì¦, ì„±ëŠ¥ ì¸¡ì • ë“±)ì„ ì¶”ê°€í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” íŒŒì´ì¬ì˜ ë””ìì¸ íŒ¨í„´ì´ì ë¬¸ë²• í¸ì˜ ê¸°ëŠ¥ì…ë‹ˆë‹¤. `@` ê¸°í˜¸ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## ëª©ì°¨

1. [ë°ì½”ë ˆì´í„° ê¸°ë³¸ ê°œë…](#1-ë°ì½”ë ˆì´í„°-ê¸°ë³¸-ê°œë…)
2. [í•¨ìˆ˜ ë°ì½”ë ˆì´í„°](#2-í•¨ìˆ˜-ë°ì½”ë ˆì´í„°)
3. [í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„°](#3-í´ë˜ìŠ¤-ë°ì½”ë ˆì´í„°)
4. [ë‚´ì¥ ë°ì½”ë ˆì´í„°](#4-ë‚´ì¥-ë°ì½”ë ˆì´í„°)
5. [ë°ì½”ë ˆì´í„° ì²´ì´ë‹](#5-ë°ì½”ë ˆì´í„°-ì²´ì´ë‹)
6. [íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ” ë°ì½”ë ˆì´í„°](#6-íŒŒë¼ë¯¸í„°ë¥¼-ë°›ëŠ”-ë°ì½”ë ˆì´í„°)
7. [ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬](#7-ë°ì½”ë ˆì´í„°-íŒ©í† ë¦¬)
8. [ì‹¤ìš©ì ì¸ ì˜ˆì œ](#8-ì‹¤ìš©ì ì¸-ì˜ˆì œ)
9. [ì£¼ì˜ì‚¬í•­](#9-ì£¼ì˜ì‚¬í•­)
10. [ìš”ì•½](#10-ìš”ì•½)

---

## 1. ë°ì½”ë ˆì´í„° ê¸°ë³¸ ê°œë…

ë°ì½”ë ˆì´í„°ëŠ” í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³ ë„ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” íŒŒì´ì¬ì˜ ê°•ë ¥í•œ ê¸°ëŠ¥ì…ë‹ˆë‹¤.

### 1.1 ë°ì½”ë ˆì´í„°ë€?

ë°ì½”ë ˆì´í„°ëŠ” ë‹¤ë¥¸ í•¨ìˆ˜ë¥¼ ê°ì‹¸ëŠ” í•¨ìˆ˜ë¡œ, ì›ë³¸ í•¨ìˆ˜ì˜ ë™ì‘ì„ í™•ì¥í•˜ê±°ë‚˜ ìˆ˜ì •í•©ë‹ˆë‹¤.

```python
def my_decorator(func):
    """ë°ì½”ë ˆì´í„° í•¨ìˆ˜"""
    def wrapper():
        print("í•¨ìˆ˜ ì‹¤í–‰ ì „")
        func()
        print("í•¨ìˆ˜ ì‹¤í–‰ í›„")
    return wrapper

@my_decorator
def say_hello():
    print("ì•ˆë…•í•˜ì„¸ìš”!")

say_hello()
# ì¶œë ¥:
# í•¨ìˆ˜ ì‹¤í–‰ ì „
# ì•ˆë…•í•˜ì„¸ìš”!
# í•¨ìˆ˜ ì‹¤í–‰ í›„
```

### 1.2 ë°ì½”ë ˆì´í„°ì˜ ë™ì‘ ì›ë¦¬

ë°ì½”ë ˆì´í„°ëŠ” ì‚¬ì‹¤ìƒ ë‹¤ìŒ ì½”ë“œì™€ ë™ì¼í•©ë‹ˆë‹¤:

```python
def say_hello():
    print("ì•ˆë…•í•˜ì„¸ìš”!")

# ë°ì½”ë ˆì´í„° ì‚¬ìš©
@my_decorator
def say_hello():
    print("ì•ˆë…•í•˜ì„¸ìš”!")

# ìœ„ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ë™ì¼í•©ë‹ˆë‹¤:
say_hello = my_decorator(say_hello)
```

### 1.3 ì£¼ìš” í™œìš© ëª©ì 

ë°ì½”ë ˆì´í„°ëŠ” ë‹¤ì–‘í•œ ëª©ì ìœ¼ë¡œ í™œìš©ë˜ë©°, ì½”ë“œì˜ ì¬ì‚¬ìš©ì„±ê³¼ ê°€ë…ì„±ì„ í¬ê²Œ í–¥ìƒì‹œí‚µë‹ˆë‹¤. ì£¼ìš” í™œìš© ëª©ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

#### 1. ë¡œê¹… (Logging)
í•¨ìˆ˜ì˜ í˜¸ì¶œ, ì¸ì, ë°˜í™˜ê°’, ì‹¤í–‰ ì‹œê°„ ë“±ì„ ìë™ìœ¼ë¡œ ê¸°ë¡í•˜ì—¬ ë””ë²„ê¹…ê³¼ ëª¨ë‹ˆí„°ë§ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.

```python
@log_function_call
def process_data(data):
    # ë°ì´í„° ì²˜ë¦¬ ë¡œì§
    return result
```

#### 2. ì‹¤í–‰ ì‹œê°„ ì¸¡ì • (Performance Monitoring)
í•¨ìˆ˜ì˜ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•˜ì—¬ ì„±ëŠ¥ ë¶„ì„ê³¼ ìµœì í™”ì— í™œìš©í•©ë‹ˆë‹¤.

```python
@timing_decorator
def expensive_operation():
    # ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…
    pass
```

#### 3. ê¶Œí•œ í™•ì¸ ë° ì¸ì¦ (Authorization & Authentication)
í•¨ìˆ˜ ì‹¤í–‰ ì „ ì‚¬ìš©ìì˜ ê¶Œí•œì´ë‚˜ ì¸ì¦ ìƒíƒœë¥¼ í™•ì¸í•˜ì—¬ ë³´ì•ˆì„ ê°•í™”í•©ë‹ˆë‹¤.

```python
@require_permission("admin")
def delete_user(user_id):
    # ê´€ë¦¬ìë§Œ ì‹¤í–‰ ê°€ëŠ¥
    pass
```

#### 4. íƒ€ì… ê²€ì¦ (Type Validation)
í•¨ìˆ˜ì˜ ì¸ìë‚˜ ë°˜í™˜ê°’ì˜ íƒ€ì…ì„ ëŸ°íƒ€ì„ì— ê²€ì¦í•˜ì—¬ ì˜¤ë¥˜ë¥¼ ì‚¬ì „ì— ë°©ì§€í•©ë‹ˆë‹¤.

```python
@type_check(name=str, age=int)
def create_person(name, age):
    return f"{name}ë‹˜ì€ {age}ì„¸ì…ë‹ˆë‹¤"
```

#### 5. ì¬ì‹œë„ ë¡œì§ (Retry Logic)
ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ë‚˜ ì™¸ë¶€ API í˜¸ì¶œ ë“± ì‹¤íŒ¨ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ì‘ì—…ì— ìë™ ì¬ì‹œë„ ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

```python
@retry_on_failure(max_retries=3, delay=1)
def api_call():
    # ì™¸ë¶€ API í˜¸ì¶œ
    pass
```

#### 6. ë©”ëª¨ì´ì œì´ì…˜ ë° ìºì‹± (Memoization & Caching)
í•¨ìˆ˜ì˜ ê²°ê³¼ë¥¼ ìºì‹œí•˜ì—¬ ë™ì¼í•œ ì…ë ¥ì— ëŒ€í•œ ë°˜ë³µ ê³„ì‚°ì„ ë°©ì§€í•˜ê³  ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.

```python
@lru_cache(maxsize=128)
def fibonacci(n):
    # í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ ê³„ì‚°
    pass
```

#### 7. ì…ë ¥/ì¶œë ¥ ë³€í™˜ (Input/Output Transformation)
í•¨ìˆ˜ì˜ ì…ë ¥ê°’ì„ ì „ì²˜ë¦¬í•˜ê±°ë‚˜ ì¶œë ¥ê°’ì„ í›„ì²˜ë¦¬í•˜ì—¬ ë°ì´í„° ë³€í™˜ì„ ìë™í™”í•©ë‹ˆë‹¤.

```python
@format_output
def get_data():
    # ë°ì´í„° ë°˜í™˜
    pass
```

#### 8. ì˜ˆì™¸ ì²˜ë¦¬ (Exception Handling)
í•¨ìˆ˜ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ ì¼ê´€ë˜ê²Œ ì²˜ë¦¬í•˜ê±°ë‚˜ íŠ¹ì • ì˜ˆì™¸ë¥¼ ë³€í™˜í•©ë‹ˆë‹¤.

```python
@handle_exceptions
def risky_operation():
    # ì˜ˆì™¸ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‘ì—…
    pass
```

#### 9. ë¹„ìœ¨ ì œí•œ (Rate Limiting)
í•¨ìˆ˜ì˜ í˜¸ì¶œ ë¹ˆë„ë¥¼ ì œí•œí•˜ì—¬ ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ ê´€ë¦¬í•˜ê±°ë‚˜ API ì‚¬ìš©ëŸ‰ì„ ì œì–´í•©ë‹ˆë‹¤.

```python
@rate_limit(calls=10, period=60)
def api_request():
    # API ìš”ì²­
    pass
```

#### 10. ì‹±ê¸€í†¤ íŒ¨í„´ (Singleton Pattern)
í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ë§Œ ìƒì„±í•˜ë„ë¡ ë³´ì¥í•˜ëŠ” ë””ìì¸ íŒ¨í„´ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

```python
@singleton
class Database:
    # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í´ë˜ìŠ¤
    pass
```

#### ë°ì½”ë ˆì´í„° ì‚¬ìš©ì˜ ì¥ì 

- **ì½”ë“œ ì¬ì‚¬ìš©ì„±**: ê³µí†µ ê¸°ëŠ¥ì„ ë°ì½”ë ˆì´í„°ë¡œ ë¶„ë¦¬í•˜ì—¬ ì—¬ëŸ¬ í•¨ìˆ˜ì— ì ìš© ê°€ëŠ¥
- **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶€ê°€ ê¸°ëŠ¥(ë¡œê¹…, ì¸ì¦ ë“±)ì„ ë¶„ë¦¬
- **ê°€ë…ì„± í–¥ìƒ**: í•¨ìˆ˜ ì •ì˜ ìœ„ì— ê°„ë‹¨í•œ ë°ì½”ë ˆì´í„°ë§Œ ì¶”ê°€í•˜ë©´ ê¸°ëŠ¥ í™•ì¥
- **ìœ ì§€ë³´ìˆ˜ ìš©ì´**: ê³µí†µ ê¸°ëŠ¥ ìˆ˜ì • ì‹œ ë°ì½”ë ˆì´í„°ë§Œ ìˆ˜ì •í•˜ë©´ ëª¨ë“  ì ìš© í•¨ìˆ˜ì— ë°˜ì˜
- **DRY ì›ì¹™**: "Don't Repeat Yourself" - ì¤‘ë³µ ì½”ë“œ ì œê±°

## 2. í•¨ìˆ˜ ë°ì½”ë ˆì´í„°

### 2.1 ê¸°ë³¸ í•¨ìˆ˜ ë°ì½”ë ˆì´í„°

```python
def timer_decorator(func):
    """í•¨ìˆ˜ ì‹¤í–‰ ì‹œê°„ì„ ì¸¡ì •í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    import time
    
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        print(f"{func.__name__} ì‹¤í–‰ ì‹œê°„: {end_time - start_time:.4f}ì´ˆ")
        return result
    return wrapper

@timer_decorator
def slow_function():
    import time
    time.sleep(1)
    return "ì™„ë£Œ"

result = slow_function()
# ì¶œë ¥: slow_function ì‹¤í–‰ ì‹œê°„: 1.0001ì´ˆ
```

### 2.2 í•¨ìˆ˜ ë©”íƒ€ë°ì´í„° ë³´ì¡´ (functools.wraps)

ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì›ë³¸ í•¨ìˆ˜ì˜ ë©”íƒ€ë°ì´í„°ê°€ ì†ì‹¤ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. `functools.wraps`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³´ì¡´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
from functools import wraps

def my_decorator(func):
    @wraps(func)  # ì›ë³¸ í•¨ìˆ˜ì˜ ë©”íƒ€ë°ì´í„° ë³´ì¡´
    def wrapper(*args, **kwargs):
        print(f"{func.__name__} í˜¸ì¶œë¨")
        return func(*args, **kwargs)
    return wrapper

@my_decorator
def example_function():
    """ì˜ˆì œ í•¨ìˆ˜ì…ë‹ˆë‹¤"""
    pass

print(example_function.__name__)  # example_function (wraps ì—†ìœ¼ë©´ wrapper)
print(example_function.__doc__)   # ì˜ˆì œ í•¨ìˆ˜ì…ë‹ˆë‹¤ (wraps ì—†ìœ¼ë©´ None)
```

### 2.3 ì¸ìë¥¼ ë°›ëŠ” í•¨ìˆ˜ ë°ì½”ë ˆì´í„°

```python
from functools import wraps

def log_calls(func):
    """í•¨ìˆ˜ í˜¸ì¶œì„ ë¡œê¹…í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"[LOG] {func.__name__} í˜¸ì¶œë¨ - ì¸ì: {args}, {kwargs}")
        result = func(*args, **kwargs)
        print(f"[LOG] {func.__name__} ì™„ë£Œ - ê²°ê³¼: {result}")
        return result
    return wrapper

@log_calls
def add(a, b):
    return a + b

@log_calls
def greet(name, greeting="ì•ˆë…•í•˜ì„¸ìš”"):
    return f"{greeting}, {name}ë‹˜!"

add(3, 5)
# ì¶œë ¥:
# [LOG] add í˜¸ì¶œë¨ - ì¸ì: (3, 5), {}
# [LOG] add ì™„ë£Œ - ê²°ê³¼: 8

greet("í™ê¸¸ë™", greeting="ë°˜ê°‘ìŠµë‹ˆë‹¤")
# ì¶œë ¥:
# [LOG] greet í˜¸ì¶œë¨ - ì¸ì: ('í™ê¸¸ë™',), {'greeting': 'ë°˜ê°‘ìŠµë‹ˆë‹¤'}
# [LOG] greet ì™„ë£Œ - ê²°ê³¼: ë°˜ê°‘ìŠµë‹ˆë‹¤, í™ê¸¸ë™ë‹˜!
```

## 3. í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„°

í´ë˜ìŠ¤ì—ë„ ë°ì½”ë ˆì´í„°ë¥¼ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3.1 ê¸°ë³¸ í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„°

```python
def add_method(cls):
    """í´ë˜ìŠ¤ì— ë©”ì„œë“œë¥¼ ì¶”ê°€í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    def new_method(self):
        return f"{self.__class__.__name__}ì˜ ìƒˆ ë©”ì„œë“œ"
    
    cls.new_method = new_method
    return cls

@add_method
class MyClass:
    def __init__(self, value):
        self.value = value

obj = MyClass(10)
print(obj.new_method())  # MyClassì˜ ìƒˆ ë©”ì„œë“œ
```

### 3.2 ì‹±ê¸€í†¤ íŒ¨í„´ ë°ì½”ë ˆì´í„°

```python
def singleton(cls):
    """ì‹±ê¸€í†¤ íŒ¨í„´ì„ êµ¬í˜„í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    instances = {}
    
    def get_instance(*args, **kwargs):
        if cls not in instances:
            instances[cls] = cls(*args, **kwargs)
        return instances[cls]
    
    return get_instance

@singleton
class Database:
    def __init__(self):
        print("ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒì„±")
        self.data = []

db1 = Database()  # ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ìƒì„±
db2 = Database()   # ì¶œë ¥ ì—†ìŒ (ì´ë¯¸ ìƒì„±ë¨)
print(db1 is db2)  # True (ê°™ì€ ì¸ìŠ¤í„´ìŠ¤)
```

## 4. ë‚´ì¥ ë°ì½”ë ˆì´í„°

íŒŒì´ì¬ì—ëŠ” ì—¬ëŸ¬ ìœ ìš©í•œ ë‚´ì¥ ë°ì½”ë ˆì´í„°ê°€ ìˆìŠµë‹ˆë‹¤.

### 4.1 @property

```python
class Temperature:
    def __init__(self, celsius):
        self._celsius = celsius
    
    @property
    def celsius(self):
        """ì„­ì”¨ ì˜¨ë„"""
        return self._celsius
    
    @celsius.setter
    def celsius(self, value):
        if value < -273.15:
            raise ValueError("ì ˆëŒ€ ì˜ë„ë³´ë‹¤ ë‚®ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤")
        self._celsius = value
    
    @property
    def fahrenheit(self):
        """í™”ì”¨ ì˜¨ë„ (ì½ê¸° ì „ìš©)"""
        return self._celsius * 9/5 + 32

temp = Temperature(25)
print(temp.celsius)      # 25
print(temp.fahrenheit)   # 77.0
temp.celsius = 30
print(temp.fahrenheit)   # 86.0
```

### 4.2 @staticmethod

```python
class MathHelper:
    @staticmethod
    def add(a, b):
        return a + b
    
    @staticmethod
    def multiply(a, b):
        return a * b

result = MathHelper.add(3, 5)  # 8
```

### 4.3 @classmethod

```python
class Person:
    count = 0
    
    def __init__(self, name):
        self.name = name
        Person.count += 1
    
    @classmethod
    def get_count(cls):
        return cls.count
    
    @classmethod
    def create_baby(cls, name):
        baby = cls(name)
        baby.age = 0
        return baby

person1 = Person("í™ê¸¸ë™")
person2 = Person("ê¹€ì² ìˆ˜")
print(Person.get_count())  # 2
```

### 4.4 @abstractmethod

```python
from abc import ABC, abstractmethod

class Animal(ABC):
    @abstractmethod
    def make_sound(self):
        pass

class Dog(Animal):
    def make_sound(self):
        return "ë©ë©"

# animal = Animal()  # âŒ ì˜¤ë¥˜
dog = Dog()  # âœ… ê°€ëŠ¥
```

### 4.5 @functools.lru_cache

```python
from functools import lru_cache

@lru_cache(maxsize=128)
def fibonacci(n):
    """í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ ê³„ì‚° (ë©”ëª¨ì´ì œì´ì…˜)"""
    if n < 2:
        return n
    return fibonacci(n-1) + fibonacci(n-2)

# ì²« ë²ˆì§¸ í˜¸ì¶œ: ê³„ì‚° ìˆ˜í–‰
print(fibonacci(30))  # ê³„ì‚° ì‹œê°„ ì†Œìš”

# ë‘ ë²ˆì§¸ í˜¸ì¶œ: ìºì‹œì—ì„œ ë°˜í™˜ (ë¹ ë¦„)
print(fibonacci(30))  # ì¦‰ì‹œ ë°˜í™˜
```

## 5. ë°ì½”ë ˆì´í„° ì²´ì´ë‹

ì—¬ëŸ¬ ë°ì½”ë ˆì´í„°ë¥¼ ë™ì‹œì— ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 5.1 ì—¬ëŸ¬ ë°ì½”ë ˆì´í„° ì ìš©

```python
def bold(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        return f"<b>{func(*args, **kwargs)}</b>"
    return wrapper

def italic(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        return f"<i>{func(*args, **kwargs)}</i>"
    return wrapper

@bold
@italic
def greet(name):
    return f"ì•ˆë…•í•˜ì„¸ìš”, {name}ë‹˜!"

print(greet("í™ê¸¸ë™"))
# ì¶œë ¥: <b><i>ì•ˆë…•í•˜ì„¸ìš”, í™ê¸¸ë™ë‹˜!</i></b>
```

**ì£¼ì˜**: ë°ì½”ë ˆì´í„°ëŠ” ì•„ë˜ì—ì„œ ìœ„ë¡œ ì ìš©ë©ë‹ˆë‹¤!

```python
@bold
@italic
def greet(name):
    return f"ì•ˆë…•í•˜ì„¸ìš”, {name}ë‹˜!"

# ìœ„ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ë™ì¼í•©ë‹ˆë‹¤:
# greet = bold(italic(greet))
```

### 5.2 ë°ì½”ë ˆì´í„° ìˆœì„œì˜ ì¤‘ìš”ì„±

```python
def timer(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        import time
        start = time.time()
        result = func(*args, **kwargs)
        print(f"ì‹¤í–‰ ì‹œê°„: {time.time() - start:.4f}ì´ˆ")
        return result
    return wrapper

def log(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"[LOG] {func.__name__} í˜¸ì¶œ")
        return func(*args, **kwargs)
    return wrapper

@timer
@log
def example():
    import time
    time.sleep(0.1)
    return "ì™„ë£Œ"

example()
# ì¶œë ¥:
# [LOG] example í˜¸ì¶œ
# ì‹¤í–‰ ì‹œê°„: 0.1001ì´ˆ
```

## 6. íŒŒë¼ë¯¸í„°ë¥¼ ë°›ëŠ” ë°ì½”ë ˆì´í„°

ë°ì½”ë ˆì´í„° ìì²´ê°€ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 6.1 ê¸°ë³¸ êµ¬ì¡°

```python
def repeat(times):
    """í•¨ìˆ˜ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‹¤í–‰í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            for _ in range(times):
                result = func(*args, **kwargs)
            return result
        return wrapper
    return decorator

@repeat(times=3)
def say_hello():
    print("ì•ˆë…•í•˜ì„¸ìš”!")

say_hello()
# ì¶œë ¥:
# ì•ˆë…•í•˜ì„¸ìš”!
# ì•ˆë…•í•˜ì„¸ìš”!
# ì•ˆë…•í•˜ì„¸ìš”!
```

### 6.2 ì„ íƒì  íŒŒë¼ë¯¸í„° ë°ì½”ë ˆì´í„°

```python
def retry(max_attempts=3, delay=1):
    """ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    import time
    
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            for attempt in range(max_attempts):
                try:
                    return func(*args, **kwargs)
                except Exception as e:
                    if attempt == max_attempts - 1:
                        raise
                    print(f"ì‹œë„ {attempt + 1} ì‹¤íŒ¨, {delay}ì´ˆ í›„ ì¬ì‹œë„...")
                    time.sleep(delay)
        return wrapper
    return decorator

@retry(max_attempts=3, delay=2)
def unreliable_function():
    import random
    if random.random() < 0.7:
        raise ValueError("ì„ì˜ ì˜¤ë¥˜")
    return "ì„±ê³µ!"
```

## 7. ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬

ë” ë³µì¡í•œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ íŒ¨í„´ì…ë‹ˆë‹¤.

### 7.1 ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬ íŒ¨í„´

```python
def validate_types(**expected_types):
    """íƒ€ì… ê²€ì¦ ë°ì½”ë ˆì´í„° íŒ©í† ë¦¬"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ìœ„ì¹˜ ì¸ì ê²€ì¦
            param_names = list(func.__code__.co_varnames[:func.__code__.co_argcount])
            for i, (arg, param_name) in enumerate(zip(args, param_names)):
                if param_name in expected_types:
                    expected_type = expected_types[param_name]
                    if not isinstance(arg, expected_type):
                        raise TypeError(
                            f"{param_name}ì€(ëŠ”) {expected_type.__name__} íƒ€ì…ì´ì–´ì•¼ í•©ë‹ˆë‹¤"
                        )
            
            # í‚¤ì›Œë“œ ì¸ì ê²€ì¦
            for param_name, value in kwargs.items():
                if param_name in expected_types:
                    expected_type = expected_types[param_name]
                    if not isinstance(value, expected_type):
                        raise TypeError(
                            f"{param_name}ì€(ëŠ”) {expected_type.__name__} íƒ€ì…ì´ì–´ì•¼ í•©ë‹ˆë‹¤"
                        )
            
            return func(*args, **kwargs)
        return wrapper
    return decorator

@validate_types(name=str, age=int)
def create_person(name, age):
    return f"{name}ë‹˜ì€ {age}ì„¸ì…ë‹ˆë‹¤"

print(create_person("í™ê¸¸ë™", 25))  # âœ… ì •ìƒ
# print(create_person("í™ê¸¸ë™", "25"))  # âŒ TypeError
```

## 8. ì‹¤ìš©ì ì¸ ì˜ˆì œ

### 8.1 ì‹¤í–‰ ì‹œê°„ ì¸¡ì • ë°ì½”ë ˆì´í„°

```python
import time
from functools import wraps

def timing_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        start_time = time.time()
        result = func(*args, **kwargs)
        end_time = time.time()
        execution_time = end_time - start_time
        print(f"{func.__name__} ì‹¤í–‰ ì‹œê°„: {execution_time:.6f}ì´ˆ")
        return result
    return wrapper

@timing_decorator
def slow_function():
    time.sleep(0.1)
    return "ì™„ë£Œ"

slow_function()
```

### 8.2 ë¡œê¹… ë°ì½”ë ˆì´í„°

```python
import logging
from functools import wraps

logging.basicConfig(level=logging.INFO)

def log_function_call(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        logging.info(f"{func.__name__} í˜¸ì¶œë¨ - ì¸ì: {args}, {kwargs}")
        try:
            result = func(*args, **kwargs)
            logging.info(f"{func.__name__} ì„±ê³µ - ê²°ê³¼: {result}")
            return result
        except Exception as e:
            logging.error(f"{func.__name__} ì‹¤íŒ¨ - ì˜¤ë¥˜: {e}")
            raise
    return wrapper

@log_function_call
def divide(a, b):
    return a / b

divide(10, 2)  # ì •ìƒ ì‹¤í–‰
# divide(10, 0)  # ì˜¤ë¥˜ ë¡œê¹…
```

### 8.3 ê¶Œí•œ í™•ì¸ ë°ì½”ë ˆì´í„°

```python
from functools import wraps

def require_permission(permission):
    """ê¶Œí•œ í™•ì¸ ë°ì½”ë ˆì´í„°"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì„¸ì…˜ì´ë‚˜ í† í°ì—ì„œ ê¶Œí•œ í™•ì¸
            user_permissions = ["read", "write"]  # ì˜ˆì‹œ
            
            if permission not in user_permissions:
                raise PermissionError(f"{permission} ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤")
            
            return func(*args, **kwargs)
        return wrapper
    return decorator

@require_permission("admin")
def delete_user(user_id):
    return f"ì‚¬ìš©ì {user_id} ì‚­ì œë¨"

# delete_user(1)  # PermissionError ë°œìƒ
```

### 8.4 ë©”ëª¨ì´ì œì´ì…˜ ë°ì½”ë ˆì´í„°

```python
from functools import wraps

def memoize(func):
    """ê°„ë‹¨í•œ ë©”ëª¨ì´ì œì´ì…˜ ë°ì½”ë ˆì´í„°"""
    cache = {}
    
    @wraps(func)
    def wrapper(*args, **kwargs):
        # í‚¤ ìƒì„± (íŠœí”Œì€ í•´ì‹œ ê°€ëŠ¥í•˜ì§€ë§Œ ë”•ì…”ë„ˆë¦¬ëŠ” ì•„ë‹˜)
        key = str(args) + str(sorted(kwargs.items()))
        
        if key not in cache:
            cache[key] = func(*args, **kwargs)
        
        return cache[key]
    return wrapper

@memoize
def expensive_function(n):
    print(f"ê³„ì‚° ì¤‘: {n}")
    return n * n

print(expensive_function(5))  # ê³„ì‚° ì¤‘: 5, 25
print(expensive_function(5))  # 25 (ìºì‹œì—ì„œ ë°˜í™˜)
```

### 8.5 ì¬ì‹œë„ ë°ì½”ë ˆì´í„°

```python
import time
from functools import wraps

def retry_on_failure(max_retries=3, delay=1, backoff=2):
    """ì‹¤íŒ¨ ì‹œ ì¬ì‹œë„í•˜ëŠ” ë°ì½”ë ˆì´í„°"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            current_delay = delay
            for attempt in range(max_retries):
                try:
                    return func(*args, **kwargs)
                except Exception as e:
                    if attempt == max_retries - 1:
                        raise
                    print(f"ì‹œë„ {attempt + 1} ì‹¤íŒ¨: {e}. {current_delay}ì´ˆ í›„ ì¬ì‹œë„...")
                    time.sleep(current_delay)
                    current_delay *= backoff
        return wrapper
    return decorator

@retry_on_failure(max_retries=3, delay=1, backoff=2)
def unreliable_api_call():
    import random
    if random.random() < 0.7:
        raise ConnectionError("ì—°ê²° ì‹¤íŒ¨")
    return "ì„±ê³µ!"
```

### 8.6 íƒ€ì… ê²€ì¦ ë°ì½”ë ˆì´í„°

```python
from functools import wraps

def type_check(**expected_types):
    """ëŸ°íƒ€ì„ íƒ€ì… ê²€ì¦ ë°ì½”ë ˆì´í„°"""
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # í•¨ìˆ˜ ì‹œê·¸ë‹ˆì²˜ ê°€ì ¸ì˜¤ê¸°
            import inspect
            sig = inspect.signature(func)
            bound_args = sig.bind(*args, **kwargs)
            bound_args.apply_defaults()
            
            # íƒ€ì… ê²€ì¦
            for param_name, value in bound_args.arguments.items():
                if param_name in expected_types:
                    expected_type = expected_types[param_name]
                    if not isinstance(value, expected_type):
                        raise TypeError(
                            f"{param_name}ì€(ëŠ”) {expected_type.__name__} íƒ€ì…ì´ì–´ì•¼ í•©ë‹ˆë‹¤. "
                            f"ë°›ì€ íƒ€ì…: {type(value).__name__}"
                        )
            
            return func(*args, **kwargs)
        return wrapper
    return decorator

@type_check(name=str, age=int, salary=float)
def create_employee(name, age, salary):
    return f"{name}ë‹˜, {age}ì„¸, ê¸‰ì—¬: {salary}"

print(create_employee("í™ê¸¸ë™", 30, 50000.0))  # âœ… ì •ìƒ
# print(create_employee("í™ê¸¸ë™", "30", 50000.0))  # âŒ TypeError
```

## 9. ì£¼ì˜ì‚¬í•­

### 9.1 ë©”íƒ€ë°ì´í„° ë³´ì¡´

```python
# âŒ ë‚˜ìœ ì˜ˆ: ë©”íƒ€ë°ì´í„° ì†ì‹¤
def bad_decorator(func):
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper

@bad_decorator
def example():
    """ì˜ˆì œ í•¨ìˆ˜"""
    pass

print(example.__name__)  # wrapper (ì›ë³¸ í•¨ìˆ˜ ì´ë¦„ ì•„ë‹˜)
print(example.__doc__)   # None (ë¬¸ì„œ ë¬¸ìì—´ ì†ì‹¤)

# âœ… ì¢‹ì€ ì˜ˆ: functools.wraps ì‚¬ìš©
from functools import wraps

def good_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        return func(*args, **kwargs)
    return wrapper

@good_decorator
def example():
    """ì˜ˆì œ í•¨ìˆ˜"""
    pass

print(example.__name__)  # example
print(example.__doc__)   # ì˜ˆì œ í•¨ìˆ˜
```

### 9.2 ë°ì½”ë ˆì´í„° ìˆœì„œ

```python
def decorator1(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print("ë°ì½”ë ˆì´í„° 1")
        return func(*args, **kwargs)
    return wrapper

def decorator2(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print("ë°ì½”ë ˆì´í„° 2")
        return func(*args, **kwargs)
    return wrapper

@decorator1
@decorator2
def example():
    print("í•¨ìˆ˜ ì‹¤í–‰")

example()
# ì¶œë ¥:
# ë°ì½”ë ˆì´í„° 1
# ë°ì½”ë ˆì´í„° 2
# í•¨ìˆ˜ ì‹¤í–‰

# ìœ„ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ë™ì¼:
# example = decorator1(decorator2(example))
```

### 9.3 í´ë¡œì € ë³€ìˆ˜ ì£¼ì˜

```python
# âŒ ë‚˜ìœ ì˜ˆ: ë£¨í”„ ë³€ìˆ˜ ìº¡ì²˜ ë¬¸ì œ
decorators = []
for i in range(3):
    def decorator(func):
        def wrapper():
            print(f"ë°ì½”ë ˆì´í„° {i}")  # í•­ìƒ 2 ì¶œë ¥
            return func()
        return wrapper
    decorators.append(decorator)

# âœ… ì¢‹ì€ ì˜ˆ: ê¸°ë³¸ ì¸ì ì‚¬ìš©
decorators = []
for i in range(3):
    def make_decorator(num):
        def decorator(func):
            def wrapper():
                print(f"ë°ì½”ë ˆì´í„° {num}")
                return func()
            return wrapper
        return decorator
    decorators.append(make_decorator(i))
```

### 9.4 ë°ì½”ë ˆì´í„°ì™€ ë””ë²„ê¹…

```python
from functools import wraps
import inspect

def debug_decorator(func):
    @wraps(func)
    def wrapper(*args, **kwargs):
        print(f"í•¨ìˆ˜: {func.__name__}")
        print(f"ì¸ì: {args}, {kwargs}")
        print(f"ì†ŒìŠ¤ íŒŒì¼: {inspect.getfile(func)}")
        result = func(*args, **kwargs)
        print(f"ë°˜í™˜ê°’: {result}")
        return result
    return wrapper

@debug_decorator
def example(x, y):
    return x + y

example(3, 5)
```

## 10. ìš”ì•½

### í•µì‹¬ ê°œë…

1. **ë°ì½”ë ˆì´í„°**: í•¨ìˆ˜ë‚˜ í´ë˜ìŠ¤ë¥¼ ìˆ˜ì •í•˜ì§€ ì•Šê³  ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ëŠ” íŒ¨í„´
2. **í•¨ìˆ˜ ë°ì½”ë ˆì´í„°**: í•¨ìˆ˜ë¥¼ ê°ì‹¸ì„œ ê¸°ëŠ¥ì„ í™•ì¥
3. **í´ë˜ìŠ¤ ë°ì½”ë ˆì´í„°**: í´ë˜ìŠ¤ì— ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •
4. **ë°ì½”ë ˆì´í„° ì²´ì´ë‹**: ì—¬ëŸ¬ ë°ì½”ë ˆì´í„°ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ ì ìš©

### ì£¼ìš” ë°ì½”ë ˆì´í„°

- `@property`: í”„ë¡œí¼í‹° ì ‘ê·¼ ì œì–´
- `@staticmethod`: ì •ì  ë©”ì„œë“œ
- `@classmethod`: í´ë˜ìŠ¤ ë©”ì„œë“œ
- `@abstractmethod`: ì¶”ìƒ ë©”ì„œë“œ
- `@functools.wraps`: ë©”íƒ€ë°ì´í„° ë³´ì¡´
- `@functools.lru_cache`: ë©”ëª¨ì´ì œì´ì…˜

### ëª¨ë²” ì‚¬ë¡€

- âœ… `functools.wraps` ì‚¬ìš©í•˜ì—¬ ë©”íƒ€ë°ì´í„° ë³´ì¡´
- âœ… ë°ì½”ë ˆì´í„° ìˆœì„œ ì´í•´í•˜ê¸°
- âœ… í´ë¡œì € ë³€ìˆ˜ ìº¡ì²˜ ì£¼ì˜
- âœ… ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì½”ë ˆì´í„° ì‘ì„±
- âœ… ëª…í™•í•œ ì´ë¦„ê³¼ ë¬¸ì„œí™”

### ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

- ë¡œê¹…
- ì‹¤í–‰ ì‹œê°„ ì¸¡ì •
- ê¶Œí•œ í™•ì¸
- íƒ€ì… ê²€ì¦
- ì¬ì‹œë„ ë¡œì§
- ë©”ëª¨ì´ì œì´ì…˜
- ìºì‹±

